import { useState, useEffect } from "react";

function Logo({ className = "" }: { className?: string }) {
	return (
		<h1 className={`font-heading font-bold text-2xl ${className}`}>
			latest.cat
		</h1>
	);
}

function Toggle() {
	const [isDark, setIsDark] = useState(false);

	useEffect(() => {
		// Check initial theme
		const savedTheme = localStorage.getItem("theme");
		const prefersDark = window.matchMedia(
			"(prefers-color-scheme: dark)",
		).matches;
		const initialDark = savedTheme === "dark" || (!savedTheme && prefersDark);

		setIsDark(initialDark);
		document.documentElement.classList.toggle("dark", initialDark);
	}, []);

	const handleToggle = () => {
		const newIsDark = !isDark;
		setIsDark(newIsDark);
		document.documentElement.classList.toggle("dark", newIsDark);
		localStorage.setItem("theme", newIsDark ? "dark" : "light");
	};

	return (
		<div className="border border-black rounded-full shadow-drop-sm w-12 h-8 px-1 self-baseline flex justify-center relative flex-col dark:border-gray">
			<label
				htmlFor="dark-mode-toggle"
				className="absolute opacity-0 top-0 left-0 right-0 bottom-0 block cursor-pointer"
			/>
			<input
				type="checkbox"
				id="dark-mode-toggle"
				className="peer hidden"
				checked={isDark}
				onChange={handleToggle}
			/>
			<div className="w-6 h-6 border-black bg-white border rounded-full shadow-drop-sm peer-checked:self-end" />
		</div>
	);
}

function Icon1() {
	return (
		<svg
			width="auto"
			height="60"
			viewBox="0 0 75 70"
			fill="none"
			xmlns="http://www.w3.org/2000/svg"
		>
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M35.451 68.637C32.383 66.986 36.064 61.171 36.807 57.593L36.875 56.74L35.426 56.967C31.782 57.306 27.479 56.682 24.999 56.065L23.851 55.732L23.91 56.307C24.622 59.837 27.586 65.054 25.348 67.369C22.079 70.752 18.241 65.386 17.067 63.483C11.317 54.165 10.346 38.984 15.884 29.569C16.783 28.04 18.32 25.491 19.66 24.051C20.014 23.67 20.491 23.223 20.903 22.837L21.348 22.415C21.288 22.369 21.24 22.311 21.209 22.245L21.233 22.258L20.725 21.988C19.601 21.332 18.799 20.614 17.888 19.218C16.473 17.048 16.706 13.181 16.281 11.175C15.125 5.724 8.468 6.052 7.079 10.056C6.488 11.761 7.682 17.19 4.236 16.993C-1.046 16.694 0.175001 8.468 1.852 5.662C4.303 1.557 11.17 -1.357 15.704 0.856003C17.025 1.5 19.189 2.637 20.534 5.04C20.878 5.656 21.404 6.532 21.575 7.14C21.694 7.566 21.842 8.20999 21.864 8.69799C21.948 10.585 22.47 13.755 23.264 15.387C24.115 17.142 25.737 18.256 27.274 18.017L32.169 17.2C37.34 16.527 43.337 18.298 47.562 21.353L48.801 22.365L49.4 21.389C51.857 17.704 56.618 12.583 60.355 13.104C60.414 13.112 60.471 13.131 60.522 13.159L60.719 13.266C60.763 13.29 60.803 13.321 60.837 13.357C61.567 14.119 61.458 17.489 61.499 19.874C61.792 19.719 62.215 19.49 62.585 19.294C63.349 18.89 64.32 18.39 65.291 17.96C66.252 17.534 67.251 17.16 68.059 17.028C68.459 16.963 68.867 16.947 69.217 17.055C69.6 17.173 69.908 17.443 70.019 17.88C70.328 19.105 69.796 20.939 69.384 22.466C68.908 24.227 68.464 25.898 68.606 27.206C68.612 27.269 68.607 27.328 68.592 27.385C68.753 27.593 68.903 27.799 69.042 28C70.455 30.061 71.36 32.928 71.571 35.018C71.817 37.483 71.438 39.503 70.681 41.152C71.799 41.733 73.101 42.201 74.286 42.7C74.534 42.805 74.65 43.092 74.547 43.34C74.441 43.588 74.155 43.705 73.906 43.6C72.721 43.1 71.398 42.625 70.228 42.018C70.065 42.297 69.891 42.563 69.706 42.817C70.598 43.682 71.603 44.482 72.674 45.132C72.905 45.272 72.978 45.572 72.838 45.803C72.698 46.034 72.398 46.106 72.167 45.967C71.053 45.291 70.014 44.469 69.093 43.582C66.409 46.623 62.302 47.698 60.3 47.8L59.706 47.797L59.539 48.587C59.471 48.869 59.396 49.172 59.313 49.492C59.292 49.602 59.271 49.714 59.25 49.827C59.238 49.891 59.213 49.95 59.179 50.002C58.304 53.314 56.869 58.078 56.562 60.034L56.526 60.734L57.2 61.341C60.685 65.223 52.684 69.43 50.433 63.119C50.092 62.162 49.929 61.271 49.827 60.382L49.646 58.352C49.628 58.362 49.61 58.371 49.585 58.384C49.425 58.518 49.276 58.6 49.131 58.678C49.048 58.723 48.956 58.74 48.868 58.735C48.426 58.941 47.935 59.147 47.492 59.272L46.943 59.324L46.902 59.397C46.889 59.411 46.875 59.424 46.86 59.436C44.777 62.814 41.671 71.986 35.451 68.637ZM46.218 58.629C47.596 55.857 50.05 48.837 48.528 44.183C48.444 43.927 48.584 43.651 48.84 43.568C49.096 43.483 49.372 43.623 49.455 43.879C50.97 48.506 48.898 55.04 47.466 58.268C48.114 58.014 49.012 57.511 49.613 57.261C52.016 55.716 54.717 53.01 55.396 49.991C55.456 49.727 55.716 49.562 55.98 49.622C56.242 49.68 56.408 49.942 56.349 50.204C55.637 53.373 53.006 56.116 50.585 57.787C50.76 59.689 50.747 61.092 51.353 62.791C53.161 67.859 59.976 64.492 55.762 61.355C55.675 61.29 55.613 61.199 55.579 61.081C55.26 59.863 57.401 52.862 58.398 49.068C58.636 47.762 58.779 46.73 58.84 45.67C58.909 44.459 58.872 43.199 58.736 41.442C58.716 41.174 58.916 40.939 59.186 40.918C59.454 40.898 59.69 41.099 59.71 41.368C59.846 43.144 59.888 44.453 59.814 45.725C59.793 46.091 59.764 46.453 59.724 46.821L59.924 46.85C61.982 46.929 71.566 44.749 70.598 35.117C70.402 33.168 69.545 30.461 68.237 28.553C66.388 25.856 62.339 22.58 61.001 22.23C60.813 22.181 60.672 22.025 60.642 21.833C60.307 19.682 60.599 15.774 60.301 14.437L60.15 14.077L58.828 14.177C55.55 15.024 51.45 19.736 49.574 22.967C52.109 25.031 56.253 32.332 56.98 35.219C57.046 35.482 56.888 35.747 56.626 35.813C56.365 35.879 56.099 35.719 56.034 35.459C55.368 32.82 51.539 26.06 49.178 23.915L48.982 23.746L48.896 23.701C48.804 23.644 48.722 23.576 48.65 23.499C48.631 23.485 48.611 23.47 48.593 23.453C44.605 19.757 37.903 17.438 32.312 18.166L27.43 18.98C25.306 19.313 23.344 17.788 22.386 15.814C21.506 14.005 20.975 10.677 20.888 8.74199C20.871 8.36999 20.748 7.812 20.634 7.402C20.505 6.942 20.073 6.21499 19.682 5.51799C18.493 3.39399 16.572 2.365 15.277 1.734C11.3 -0.205999 4.945 2.388 2.69 6.163C0.972001 9.04 0.568001 15.807 4.29 16.019C6.518 16.146 5.439 11.804 6.156 9.737C7.845 4.868 15.859 4.479 17.236 10.973C17.773 13.506 17.404 16.688 18.707 18.684C19.785 20.338 20.634 20.897 22.377 21.758C24.458 22.521 27.686 23.225 30.619 22.117C30.871 22.021 31.154 22.148 31.249 22.4C31.344 22.652 31.218 22.935 30.965 23.03C27.872 24.2 24.558 23.545 22.336 22.799C21.844 23.312 20.792 24.268 20.375 24.716C19.121 26.064 17.639 28.513 16.726 30.064C11.397 39.125 12.311 53.916 17.898 62.97C19.434 65.459 22.414 69 24.646 66.69C26.589 64.678 22.928 59.189 22.791 55.27C21.712 54.706 20.409 53.801 19.743 53.046C19.564 52.845 19.583 52.536 19.785 52.358C19.986 52.179 20.296 52.198 20.474 52.4C21.049 53.051 22.269 53.897 23.256 54.412C23.386 54.405 23.521 54.45 23.617 54.574C23.732 54.642 23.823 54.68 23.908 54.714L24.215 54.842C26.242 55.499 32.767 56.707 37.208 55.708C37.252 55.361 37.292 55.009 37.33 54.658C37.468 53.366 37.557 52.101 37.64 51.143C37.663 50.874 37.899 50.675 38.168 50.698C38.436 50.721 38.636 50.957 38.613 51.226C38.531 52.181 38.44 53.454 38.302 54.762C38.163 56.067 37.975 57.426 37.695 58.546C37.676 58.619 37.643 58.685 37.597 58.739C36.633 62.436 33.905 66.696 35.913 67.777C41.27 70.662 43.552 62.619 46.218 58.629ZM61.445 35.464C61.538 35.242 61.758 35.034 62.145 34.865C63.612 34.222 66.174 36.449 64.634 37.4C63.212 38.278 61.057 36.404 61.445 35.464ZM66.399 34.572C66.399 33.809 66.931 33.191 67.584 33.191C68.237 33.191 68.767 33.809 68.767 34.572C68.767 35.335 68.237 35.953 67.584 35.953C66.931 35.953 66.399 35.335 66.399 34.572ZM26.998 33.616C27.104 33.072 27.241 32.511 27.417 31.955C26.998 32.115 26.567 32.3 26.102 32.506C25.856 32.616 25.567 32.505 25.457 32.259C25.347 32.012 25.458 31.724 25.704 31.613C26.289 31.353 26.835 31.121 27.38 30.927C27.089 30.496 26.82 30.022 26.581 29.484C26.472 29.239 26.582 28.95 26.829 28.84C27.076 28.731 27.364 28.841 27.473 29.089C27.662 29.513 27.87 29.892 28.097 30.242C28.382 29.662 28.721 29.111 29.12 28.614C29.289 28.403 29.597 28.371 29.806 28.54C30.017 28.708 30.05 29.015 29.882 29.226C29.579 29.602 29.313 30.018 29.08 30.461C29.714 30.346 30.389 30.287 31.157 30.298C31.426 30.302 31.642 30.524 31.637 30.793C31.634 31.063 31.411 31.278 31.142 31.274C30.361 31.262 29.688 31.329 29.049 31.462C29.554 32.019 30.118 32.541 30.738 33.13C30.932 33.317 30.94 33.626 30.755 33.821C30.568 34.016 30.259 34.024 30.064 33.838C29.475 33.279 28.903 32.752 28.372 32.171C28.199 32.711 28.062 33.261 27.957 33.803C27.905 34.067 27.648 34.241 27.384 34.189C27.119 34.137 26.946 33.881 26.998 33.616ZM56.215 30.95C56.215 30.163 56.761 29.523 57.437 29.523C58.111 29.523 58.659 30.163 58.659 30.95C58.659 31.737 58.111 32.376 57.437 32.376C56.761 32.376 56.215 31.737 56.215 30.95ZM68.441 22.21C68.934 20.383 69.293 18.995 69.072 18.12C69.056 18.056 69.032 18.021 68.929 17.988C68.792 17.946 68.56 17.936 68.216 17.992C67.538 18.103 66.635 18.433 65.686 18.854C64.748 19.269 63.8 19.756 63.041 20.158C62.286 20.557 61.768 20.845 61.539 20.943L61.583 21.423L61.985 21.587C63.481 22.353 65.845 24.282 67.618 26.232C67.698 24.938 68.091 23.506 68.441 22.21Z"
				className="fill-black dark:fill-white"
			/>
		</svg>
	);
}

export default function Header() {
	const [Icon] = useState(() => Icon1); // Using only Icon1 for now

	return (
		<header className="max-w-7xl mx-auto px-10 py-5 flex justify-between items-center">
			<a href="/" className="flex-1">
				<Logo />
			</a>

			<div className="text-2xl flex-1 text-center">
				<Icon />
			</div>

			<div className="flex-1 text-right flex justify-end">
				<Toggle />
			</div>
		</header>
	);
}
