generator db {
    provider             = "prisma-client-py"
    interface            = "asyncio"
    recursive_type_depth = "5"
}

datasource db {
    provider = "sqlite"
    url      = "file:db.sqlite"
}

model Link {
    id          Int      @id @default(autoincrement())
    name        String
    url         String
    software    Software @relation(fields: [software_id], references: [id])
    software_id Int
}

model Software {
    id      Int       @id @default(autoincrement())
    name    String
    slug    String    @unique
    aliases Alias[]
    links   Link[]
    version Version[]
}

model Alias {
    id          Int      @id @default(autoincrement())
    name        String
    software    Software @relation(fields: [software_id], references: [id])
    software_id Int
}

model Version {
    id          Int      @id @default(autoincrement())
    software_id Int
    major       Int
    minor       Int?
    patch       Int?
    build       String?
    software    Software @relation(fields: [software_id], references: [id], onDelete: Cascade, onUpdate: NoAction) @ignore
}
